@{
    var title = ViewData["Title"] as string ?? "Apar Admin";
}
<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@title</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

    <!-- Gunakan satu Font Awesome (lokal) -->
    <link rel="stylesheet" href="~/lib/font-awesome/css/all.min.css" />

    <link href="~/css/site.css" rel="stylesheet" />

    @RenderSection("Styles", required: false)
</head>

<body>
    @Html.Partial("_Navbar")

    <div class="app-shell container-fluid">
        <!-- Sidebar desktop -->
        <div class="d-none d-lg-block">@Html.Partial("_Sidebar")</div>

        <!-- Main -->
        <main class="app-main p-3 p-lg-4">
            @RenderSection("page_header", required: false)

            <div class="content">
                @RenderBody()
            </div>

            <footer class="mt-4 pt-3 border-top">
                <div class="d-flex justify-content-between">
                    <span>PT Kaltim Prima Coal — Business Performance, Improvement and Development.</span>
                    <span class="text-muted">Satria.</span>
                    @* <span class="text-muted">Build @(System.Reflection.Assembly.GetExecutingAssembly().GetName().Version)</span> *@
                </div>
            </footer>
        </main>
    </div>

    @Html.Partial("_Toast")

    <!-- 1) jQuery harus paling awal (dengan fallback multi-CDN) -->
    <script>
        (function ensureJQuery() {
            if (window.jQuery) return;

            function add(src, onload, onerror) {
                var s = document.createElement('script');
                s.src = src; s.async = false; // urutan penting
                s.onload = onload; s.onerror = onerror || function () { };
                document.head.appendChild(s);
            }

            // urutan fallback: code.jquery → jsDelivr → Google
            add('https://code.jquery.com/jquery-3.7.1.min.js',
                function () { /* ok */ },
                function () {
                    add('https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js',
                        function () { /* ok */ },
                        function () {
                            add('https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js',
                                function () { /* ok */ },
                                function () { console.error('Gagal memuat jQuery dari semua CDN.'); }
                            );
                        }
                    );
                }
            );
        })();
    </script>

    <!-- 2) Bootstrap JS bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Render salah satu section scripts yang didefinisikan (case-insensitive safe) -->
    @if (IsSectionDefined("scripts"))
    {
        @RenderSection("scripts", required: false)
    }
    else
    {
        @RenderSection("Scripts", required: false)
    }
</body>

</html>
